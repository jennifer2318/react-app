(this.webpackJsonpReactSample=this.webpackJsonpReactSample||[]).push([[0],{45:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),s=n.n(r),c=n(19),i=n.n(c),o=(n(45),n(9)),l=n(10),u=n(12),d=n(11),p=n(22),h=n(3),j=n(14),b=n(21),v=n(16),O=n.n(v),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return""===e?{valid:!1,err:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"}:e.length<t?{valid:!1,err:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f ".concat(t," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}:e.length>n?{valid:!1,err:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}:{valid:!0,err:""}},m=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeHandler=function(e){var t,n=e.target.value,r=a.props.name;switch(a.props.validType){case"username":t=function(e){var t=f(e);return!1===t.valid?t:/^[\w.@+-]+$/.test(e)?{valid:!0,err:""}:{valid:!1,err:'\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u044b "a-z", "A-Z", "0-9",".","@", "+", "-" '}}(n);break;default:t=f(n)}var s=t,c=s.valid,i=s.err;a.setState({value:n,valid:c,err:i}),a.props.onChange({valid:c,value:n,name:r})},a.state={value:a.props.value,valid:!1,err:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435"},a}return Object(l.a)(n,[{key:"render",value:function(){var e,t;return Object(a.jsxs)("div",{className:O()(this.state.valid?"valid":"no-valid","".concat(this.props.name.toLowerCase(),"-filed"),"input",this.props.className),children:[Object(a.jsxs)("label",{children:[this.props.label?Object(a.jsx)("span",{className:"label",children:this.props.label}):null,Object(a.jsx)("input",{type:null!==(e=this.props.type)&&void 0!==e?e:"text",name:this.props.name,placeholder:null!==(t=this.props.placeholder)&&void 0!==t?t:"",value:this.state.value,onChange:this.changeHandler})]}),this.state.err?Object(a.jsx)("span",{className:"error-aria",children:this.state.err}):null]})}}]),n}(r.Component),g=n(26),y=n.n(g),S=function(e){return{type:"LOGIN_USER",payload:e}},x=function(e){return{type:"MESSAGEBAR_SHOW_MESSAGE",payload:e}},k=function(e){return{type:"GET_LIST_USERS",payload:e}},N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeHandle=function(e){a.setState(Object(b.a)({},e.name,{value:e.value,valid:e.valid}))},a.submitHandle=function(e){e.preventDefault(),a.state.username.valid&&a.state.password.valid&&a.props.userLogin({username:a.state.username.value,password:a.state.password.value})},a.state={username:{value:"",valid:!1},password:{value:"",valid:!1}},a}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"container login-page",children:Object(a.jsxs)("form",{onSubmit:this.submitHandle,children:[Object(a.jsx)("h1",{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(a.jsx)(m,{onChange:this.changeHandle,placeholder:"\u0412\u0430\u0448 \u043b\u043e\u0433\u0438\u043d",name:"username"}),Object(a.jsx)(m,{onChange:this.changeHandle,placeholder:"\u0412\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password"}),Object(a.jsx)("input",{type:"submit"})]})})}}]),n}(r.Component),E=Object(j.b)((function(e){return{token:e.login.token}}),(function(e){return{userLogin:function(t){return e((n=t,function(e){return y.a.post("http://emphasoft-test-assignment.herokuapp.com/api-token-auth/",n).then((function(t){t.data.token&&(localStorage.setItem("token",t.data.token),e(S(t.data.token)))})).catch((function(t){t.response&&400===t.response.status&&t.response.data.non_field_errors&&e(x({message:"\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",type:"err"}))}))}));var n}}}))(N),T=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).clickHandle=function(e){e.preventDefault(),a.props.hideMessage()},a.state={timeoutId:-1},a}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.msgObj.message!==e.msgObj.message){var n=setTimeout((function(){t.props.hideMessage()}),1e4);this.setState({timeoutId:n})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.state.timeoutId)}},{key:"render",value:function(){var e=this.props.msgObj,t=e.message,n=e.type;return t?Object(a.jsxs)("div",{className:O()("message-bar",n),children:[Object(a.jsx)("span",{children:t}),Object(a.jsx)("button",{className:"close",onClick:this.clickHandle})]}):null}}]),n}(r.Component),F=Object(j.b)((function(e){return{msgObj:e.messageBar.message}}),(function(e){return{hideMessage:function(){return e({type:"MESSAGEBAR_HIDE_MESSAGE"})}}}))(T),C=(n(67),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).sortByKey=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return console.log(t,n),n?e.sort((function(e,n){return isNaN(e[t])||isNaN(n[t])?e[t]>n[t]?1:-1:Number(e[t])>Number(n[t])?1:-1})):e.sort((function(e,n){return isNaN(e[t])||isNaN(n[t])?e[t]<n[t]?1:-1:Number(e[t])<Number(n[t])?1:-1}))},r.filterHandleClick=function(e){e.preventDefault();var t=e.target,n=r.state,a=n.currentFilter,s=n.isTopSort,c=n.isFiltered,i=t.attributes.getNamedItem("name").value;a===i?(r.setState({isTopSort:!s}),r.sortByKey(c?r.state.usersFilter:r.props.data,a,s)):(r.setState({currentFilter:i,isTopSort:!1}),r.sortByKey(c?r.state.usersFilter:r.props.data,i,!0))},r.renderTableHeader=function(){var e=r.props.data,t=r.state,n=t.currentFilter,s=t.isTopSort;return Object.keys(e[0]).map((function(e,t){return Object(a.jsx)("th",{onClick:r.filterHandleClick,name:e,className:O()(e,"header-field",n===e?!0===s?"active-top":"active-down":""),children:e},t)}))},r.renderRows=function(e){return e.map((function(e,t){return Object(a.jsx)("tr",{className:"data-row",children:Object.values(e).map((function(e,t){return Object(a.jsx)("td",{children:"boolean"===typeof e?Object(a.jsx)("input",{type:"checkbox",readOnly:!0,checked:e}):e},t)}))},t)}))},r.changeHandler=function(e){var t=r.state.currentFilter;if(e.valid){var n=r.props.data.filter((function(t){return t.username.startsWith(e.value)}));console.log(n);var a=!n.length<=0;r.setState({usersFilter:n,isFiltered:a,username:e.value}),r.sortByKey(r.state.usersFilter,t,!0)}else r.setState({usersFilter:[],isFiltered:!1,username:""}),r.sortByKey(r.props.data,t,!0)},r.state={currentFilter:"",isTopSort:!1,usersFilter:[],isFiltered:!1,username:""},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.data;if(e.length<=0)return null;var t=this.state,n=t.usersFilter,r=t.username;return Object(a.jsxs)("div",{children:[Object(a.jsx)(m,{label:"\u0424\u0438\u043b\u044c\u0442 \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",validType:"username",className:"filter-field",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"userFilter",value:this.state.username,onChange:this.changeHandler}),Object(a.jsxs)("table",{className:O()("data-table",this.props.filterable?"filterable":""),children:[Object(a.jsx)("thead",{className:"data-table-header",children:Object(a.jsx)("tr",{children:this.renderTableHeader()})}),Object(a.jsx)("tbody",{children:r?this.renderRows(n):this.renderRows(e)})]})]})}}]),n}(r.Component)),H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersFetch()}},{key:"render",value:function(){return Object(a.jsx)(C,{data:this.props.users})}}]),n}(r.Component),_=Object(j.b)((function(e){return{users:e.usersList.users}}),(function(e){return{getUsersFetch:function(){return e((function(e){var t=localStorage.token;if(t)return y.a.get("http://emphasoft-test-assignment.herokuapp.com/api/v1/users/",{headers:{Authorization:"Token ".concat(t)}}).then((function(t){t.data&&Array.isArray(t.data)&&e(k(t.data))})).catch((function(t){t.response&&401===t.response.status&&(localStorage.removeItem("token"),e({type:"LOGOUT_USER"}),e(x({message:"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b",type:"err"})))}))}))}}}))(H),w=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){e.props.getToken()},e.clickHandle=function(t){t.preventDefault(),localStorage.removeItem("token"),e.props.logout()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.token;return Object(a.jsxs)(p.a,{children:[Object(a.jsx)("div",{className:"container-fluid header",children:Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("div",{className:"header-container",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{className:"button",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),e?null:Object(a.jsx)("li",{children:Object(a.jsx)(p.b,{className:"button",to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),e?Object(a.jsx)("button",{onClick:this.clickHandle,children:"\u0412\u044b\u0445\u043e\u0434"}):null]})})}),Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{exact:!0,path:"/",children:e?Object(a.jsx)(_,{}):Object(a.jsx)(h.a,{to:"/login"})}),Object(a.jsx)(h.b,{path:"/login",children:e?Object(a.jsx)(h.a,{to:"/"}):Object(a.jsx)(E,{})})]}),Object(a.jsx)(F,{})]})}}]),n}(r.Component),A=Object(j.b)((function(e){return{token:e.login.token}}),(function(e){return{getToken:function(){return e((function(e){var t=localStorage.token;t&&e(S(t))}))},logout:function(){return e({type:"LOGOUT_USER"})}}}))(w),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))},I=n(15),L=n(39),G=n(4),U={token:""};var M={message:"",type:""};var B={users:[]};var D=Object(I.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":return Object(G.a)(Object(G.a)({},e),{},{token:t.payload});case"LOGOUT_USER":return Object(G.a)(Object(G.a)({},e),{},{token:""});default:return e}},messageBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGEBAR_SHOW_MESSAGE":return Object(G.a)(Object(G.a)({},e),{},{message:t.payload});case"MESSAGEBAR_HIDE_MESSAGE":return Object(G.a)(Object(G.a)({},e),{},{message:""});default:return e}},usersList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LIST_USERS":return Object(G.a)(Object(G.a)({},e),{},{users:t.payload});case"CLEAR_LIST_USERS":return Object(G.a)(Object(G.a)({},e),{},{users:[]});default:return e}}});i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(j.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(I.d)(D,e,Object(I.a)(L.a))}(),children:Object(a.jsx)(A,{})})}),document.getElementById("root")),R()}},[[69,1,2]]]);
//# sourceMappingURL=main.8132121d.chunk.js.map